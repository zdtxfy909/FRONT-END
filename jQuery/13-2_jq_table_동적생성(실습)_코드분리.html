<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>table 동적 생성(실습)-코드분리</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
    /* 행과 열을 입력 받아 테이블 생성하기
    val() 메소드 : value 값 읽기, 설정
    1. <테이블생성> 버튼에 이벤트 연결
    2. input 태그 값을 읽어오기(행, 열)
    3. 행, 열 값에 맞추어 table 태그 작성
    4. 원하는 위치(#myDiv)에 table 태그 추가(html() 사용)
    ****************/
    
    $(function(){
        //DOM 객체 컨트롤 가능 = 함수 호출 가능
        initEvent(); //이벤트 연결 초기화 작업
    });
    
    //함수 작성 부분을 먼저 읽고 후에 호출됨 (DOM객체에서 호출했으니까)
    function initEvent() {
        //1. <테이블생성> 버튼에 이벤트 연결
        $("#btn").on("click", btnMakeTable);   
    }
    
    function btnMakeTable(){
        //2. input 태그 값을 읽어오기(행, 열)
        let rowCnt = $("#row").val(); 
        console.log("rowCnt : " + rowCnt); 

        let colCnt = $("#col").val();
        console.log("colCnt : " + colCnt); 

        //3. 행, 열 값에 맞추어 table 태그 작성
        let htmlTag = makeTable(rowCnt, colCnt);

        //4. 원하는 위치(#myDiv)에 table 태그 추가(html() 사용)
        $("#myDiv").html(htmlTag); 
    }
    
    //테이블 작성하는 기능
    function makeTable(rowCnt, colCnt){
        let htmlTag = "<table>";
        //---------thead 영역---------
        htmlTag += "<thead>";
        htmlTag += "<tr>";
        for (let col = 1; col <= colCnt; col++) {
            htmlTag += "<th>항목" + col + "</th>"; 
        };
        htmlTag += "</tr>";
        htmlTag += "</thead>";
        //---------tbody 영역----------
        htmlTag += "<tbody>";
        for (let row = 1; row <= rowCnt; row++) {
            htmlTag += "<tr>";
            for (let col = 1; col <= colCnt; col++) {
                htmlTag += "<td>데이터 " + row + ", " + col + "</td>"; 
            };
            htmlTag += "</tr>";
        };
        htmlTag += "</tbody>";
        htmlTag += "</table>";
        return htmlTag;
    };
    
    
</script>
<style>
    table, th, td { border: 1px solid black; }
    #myDiv { background-color: yellow; }
</style>    
</head>
<body>
    <h2>테이블 동적 생성</h2>
    <input type="text" id="row" value="2">행 &nbsp;
    <input type="text" id="col" value="3">열 &nbsp;
    <button id="btn">테이블 생성</button>
    
    <hr>
    <div id="myDiv">
        동적으로 테이블 생성할 영역
    </div>
    <hr><hr>
    
    <table>
        <thead>
            <tr>
                <th>항목1</th>
                <th>항목2</th>
                <th>항목3</th>
            </tr>    
        </thead>
        <tbody>
            <tr>
                <td>데이터 1, 1</td>
                <td>데이터 1, 2</td>
                <td>데이터 1, 3</td>
            </tr>
            <tr>
                <td>데이터 2, 1</td>
                <td>데이터 2, 2</td>
                <td>데이터 2, 3</td>
            </tr>
        </tbody>
    </table>
    
    
</body>
</html>